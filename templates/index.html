<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MAXUS</title>
  <link
    href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;700;900&family=Rajdhani:wght@300;400;500;600&display=swap"
    rel="stylesheet">
  <style>
    :root {
      --bg: #040d14;
      --bg2: #060f1a;
      --panel: rgba(6, 20, 35, 0.85);
      --border: rgba(0, 200, 255, 0.15);
      --accent: #00c8ff;
      --accent2: #0066ff;
      --accent3: #00ffcc;
      --text: #c8e8ff;
      --text-dim: #4a7a99;
      --glow: 0 0 20px rgba(0, 200, 255, 0.4);
      --glow-sm: 0 0 8px rgba(0, 200, 255, 0.3);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: var(--bg);
      color: var(--text);
      font-family: 'Rajdhani', sans-serif;
      height: 100vh;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      position: relative;
    }

    /* Animated background grid */
    body::before {
      content: '';
      position: fixed;
      inset: 0;
      background-image:
        linear-gradient(rgba(0, 200, 255, 0.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0, 200, 255, 0.03) 1px, transparent 1px);
      background-size: 40px 40px;
      animation: gridMove 20s linear infinite;
      pointer-events: none;
      z-index: 0;
    }

    body::after {
      content: '';
      position: fixed;
      inset: 0;
      background: radial-gradient(ellipse at 50% 40%, rgba(0, 60, 120, 0.25) 0%, transparent 70%);
      pointer-events: none;
      z-index: 0;
    }

    @keyframes gridMove {
      0% {
        transform: translateY(0);
      }

      100% {
        transform: translateY(40px);
      }
    }

    /* Header */
    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 24px;
      border-bottom: 1px solid var(--border);
      background: rgba(4, 13, 20, 0.9);
      backdrop-filter: blur(10px);
      position: relative;
      z-index: 10;
      flex-shrink: 0;
    }

    .logo {
      font-family: 'Orbitron', sans-serif;
      font-size: 22px;
      font-weight: 900;
      letter-spacing: 6px;
      color: var(--accent);
      text-shadow: var(--glow);
      position: relative;
    }

    .logo span {
      color: var(--accent3);
    }

    .status-badge {
      display: flex;
      align-items: center;
      gap: 8px;
      background: rgba(0, 200, 255, 0.08);
      border: 1px solid rgba(0, 200, 255, 0.2);
      border-radius: 20px;
      padding: 4px 12px;
      font-size: 12px;
      letter-spacing: 2px;
      color: var(--accent3);
      font-family: 'Orbitron', sans-serif;
      font-weight: 600;
    }

    .status-dot {
      width: 7px;
      height: 7px;
      background: var(--accent3);
      border-radius: 50%;
      box-shadow: 0 0 8px var(--accent3);
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {

      0%,
      100% {
        opacity: 1;
        transform: scale(1);
      }

      50% {
        opacity: 0.5;
        transform: scale(0.8);
      }
    }

    .header-right {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .time-display {
      font-family: 'Orbitron', sans-serif;
      font-size: 13px;
      color: var(--accent);
      letter-spacing: 2px;
      opacity: 0.8;
    }

    .settings-btn {
      width: 34px;
      height: 34px;
      border: 1px solid var(--border);
      border-radius: 8px;
      background: transparent;
      color: var(--accent);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.2s;
    }

    .settings-btn:hover {
      border-color: var(--accent);
      box-shadow: var(--glow-sm);
    }

    /* Main layout */
    .main {
      display: flex;
      flex: 1;
      overflow: hidden;
      position: relative;
      z-index: 1;
    }

    /* Left sidebar */


    .sidebar::-webkit-scrollbar {
      width: 4px;
    }

    .sidebar::-webkit-scrollbar-track {
      background: transparent;
    }

    .sidebar::-webkit-scrollbar-thumb {
      background: rgba(0, 200, 255, 0.2);
      border-radius: 2px;
    }

    .panel {
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 12px;
      overflow: hidden;
      backdrop-filter: blur(8px);
      position: relative;
    }

    .panel::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent, var(--accent), transparent);
      opacity: 0.5;
    }

    .panel-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 14px;
      border-bottom: 1px solid var(--border);
      font-family: 'Orbitron', sans-serif;
      font-size: 11px;
      letter-spacing: 2px;
      color: var(--accent);
    }

    .panel-header svg {
      opacity: 0.6;
      cursor: pointer;
      transition: opacity 0.2s;
    }

    .panel-header svg:hover {
      opacity: 1;
    }

    .panel-header-icon {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .panel-body {
      padding: 12px 14px;
    }

    /* System Stats */
    .stat-row {
      margin-bottom: 10px;
    }

    .stat-label {
      display: flex;
      justify-content: space-between;
      font-size: 12px;
      margin-bottom: 4px;
      color: var(--text-dim);
      letter-spacing: 1px;
    }

    .stat-label span:last-child {
      color: var(--accent);
      font-weight: 600;
    }

    .stat-bar {
      height: 4px;
      background: rgba(0, 200, 255, 0.1);
      border-radius: 2px;
      overflow: hidden;
    }

    .stat-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--accent2), var(--accent));
      border-radius: 2px;
      position: relative;
      animation: barLoad 1s ease-out forwards;
      transform-origin: left;
    }

    @keyframes barLoad {
      from {
        transform: scaleX(0);
      }

      to {
        transform: scaleX(1);
      }
    }

    .stat-fill::after {
      content: '';
      position: absolute;
      right: 0;
      top: 0;
      bottom: 0;
      width: 20px;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4));
      animation: shimmer 2s ease-in-out infinite;
    }

    @keyframes shimmer {
      0% {
        opacity: 0;
      }

      50% {
        opacity: 1;
      }

      100% {
        opacity: 0;
      }
    }

    .stat-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 8px;
      margin-top: 10px;
    }

    .stat-box {
      background: rgba(0, 200, 255, 0.05);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 8px;
      text-align: center;
    }

    .stat-box-label {
      font-size: 10px;
      color: var(--text-dim);
      letter-spacing: 1px;
    }

    .stat-box-value {
      font-size: 14px;
      color: var(--accent);
      font-weight: 600;
      margin-top: 2px;
    }

    /* Weather */
    .weather-main {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 12px;
    }

    .temp {
      font-size: 36px;
      font-weight: 600;
      color: var(--accent);
      line-height: 1;
      font-family: 'Orbitron', sans-serif;
    }

    .temp sup {
      font-size: 16px;
      vertical-align: top;
      margin-top: 4px;
      display: inline-block;
    }

    .location {
      font-size: 12px;
      color: var(--text-dim);
      margin-top: 4px;
      letter-spacing: 1px;
    }

    .condition {
      font-size: 11px;
      color: var(--text-dim);
      letter-spacing: 1px;
      margin-top: 2px;
    }

    .weather-icon {
      font-size: 40px;
      opacity: 0.8;
    }

    .weather-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 8px;
      border-top: 1px solid var(--border);
      padding-top: 10px;
    }

    .weather-item {
      text-align: center;
    }

    .weather-item-label {
      font-size: 10px;
      color: var(--text-dim);
      letter-spacing: 1px;
    }

    .weather-item-value {
      font-size: 13px;
      color: var(--text);
      margin-top: 2px;
      font-weight: 500;
    }

    /* Center area */
    .center {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      position: relative;
      overflow: hidden;
    }

    /* JARVIS orb */
    .orb-container {
      position: relative;
      width: 340px;
      height: 340px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 30px;
    }

    /* Rotating rings */
    .ring {
      position: absolute;
      border-radius: 50%;
      border: 1px solid;
      animation: spin linear infinite;
    }

    .ring-1 {
      width: 340px;
      height: 340px;
      border-color: rgba(0, 200, 255, 0.12);
      animation-duration: 20s;
    }

    .ring-2 {
      width: 300px;
      height: 300px;
      border-color: rgba(0, 200, 255, 0.18);
      animation-duration: 15s;
      animation-direction: reverse;
    }

    .ring-2::before {
      content: '';
      position: absolute;
      width: 8px;
      height: 8px;
      background: var(--accent);
      border-radius: 50%;
      box-shadow: var(--glow);
      top: 50%;
      left: -4px;
      transform: translateY(-50%);
    }

    .ring-3 {
      width: 260px;
      height: 260px;
      border-color: rgba(0, 200, 255, 0.25);
      animation-duration: 10s;
    }

    .ring-3::after {
      content: '';
      position: absolute;
      width: 6px;
      height: 6px;
      background: var(--accent3);
      border-radius: 50%;
      box-shadow: 0 0 8px var(--accent3);
      bottom: -3px;
      left: 50%;
      transform: translateX(-50%);
    }

    .ring-4 {
      width: 220px;
      height: 220px;
      border-color: rgba(0, 200, 255, 0.3);
      border-style: dashed;
      animation-duration: 25s;
      animation-direction: reverse;
    }

    @keyframes spin {
      from {
        transform: rotate(0deg);
      }

      to {
        transform: rotate(360deg);
      }
    }

    /* Core orb */
    .orb-core {
      width: 170px;
      height: 170px;
      border-radius: 50%;
      background: radial-gradient(circle at 35% 35%, rgba(0, 150, 255, 0.4), rgba(0, 30, 80, 0.9) 60%, rgba(2, 8, 20, 0.95));
      border: 1px solid rgba(0, 200, 255, 0.4);
      box-shadow:
        0 0 40px rgba(0, 100, 255, 0.3),
        0 0 80px rgba(0, 60, 200, 0.15),
        inset 0 0 40px rgba(0, 100, 200, 0.2);
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      z-index: 2;
      animation: orbBreath 4s ease-in-out infinite;
    }

    @keyframes orbBreath {

      0%,
      100% {
        box-shadow: 0 0 40px rgba(0, 100, 255, 0.3), 0 0 80px rgba(0, 60, 200, 0.15), inset 0 0 40px rgba(0, 100, 200, 0.2);
      }

      50% {
        box-shadow: 0 0 60px rgba(0, 150, 255, 0.5), 0 0 120px rgba(0, 80, 255, 0.2), inset 0 0 60px rgba(0, 150, 255, 0.3);
      }
    }

    /* Sound bars inside orb */
    .sound-bars {
      display: flex;
      align-items: center;
      gap: 4px;
      height: 40px;
    }

    .bar {
      width: 4px;
      background: linear-gradient(180deg, var(--accent3), var(--accent));
      border-radius: 2px;
      animation: barDance 0.8s ease-in-out infinite;
      box-shadow: 0 0 8px var(--accent);
    }

    .bar:nth-child(1) {
      animation-delay: 0s;
      animation-duration: 0.7s;
    }

    .bar:nth-child(2) {
      animation-delay: 0.1s;
      animation-duration: 0.9s;
    }

    .bar:nth-child(3) {
      animation-delay: 0.2s;
      animation-duration: 0.6s;
    }

    .bar:nth-child(4) {
      animation-delay: 0.15s;
      animation-duration: 1.1s;
    }

    .bar:nth-child(5) {
      animation-delay: 0.05s;
      animation-duration: 0.8s;
    }

    @keyframes barDance {

      0%,
      100% {
        height: 8px;
      }

      50% {
        height: 36px;
      }
    }

    /* MAXUS title */
    .maxus-title {
      font-family: 'Orbitron', sans-serif;
      font-size: 42px;
      font-weight: 900;
      letter-spacing: 12px;
      color: var(--accent);
      text-shadow: 0 0 30px rgba(0, 200, 255, 0.6), 0 0 60px rgba(0, 100, 255, 0.3);
      margin-bottom: 10px;
      position: relative;
    }

    .maxus-title::after {
      content: 'MAXUS';
      position: absolute;
      inset: 0;
      color: transparent;
      -webkit-text-stroke: 1px rgba(0, 200, 255, 0.2);
      filter: blur(4px);
      z-index: -1;
    }

    .listening-badge {
      display: flex;
      align-items: center;
      gap: 8px;
      background: rgba(0, 200, 255, 0.08);
      border: 1px solid rgba(0, 200, 255, 0.2);
      border-radius: 20px;
      padding: 6px 16px;
      font-size: 12px;
      letter-spacing: 2px;
      color: var(--accent3);
      font-family: 'Orbitron', sans-serif;
    }

    .listening-dot {
      width: 6px;
      height: 6px;
      background: var(--accent3);
      border-radius: 50%;
      box-shadow: 0 0 6px var(--accent3);
      animation: pulse 1.5s ease-in-out infinite;
    }

    /* Right panel - Conversation */
    .right-panel {
      width: 800px;
      flex-shrink: 0;
      display: flex;
      flex-direction: column;
      border-left: 1px solid var(--border);
      background: rgba(4, 13, 20, 0.5);
    }

    .conv-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 14px 18px;
      border-bottom: 1px solid var(--border);
      font-family: 'Orbitron', sans-serif;
      font-size: 12px;
      letter-spacing: 3px;
      color: var(--accent);
    }

    .conv-actions {
      display: flex;
      gap: 8px;
    }

    .conv-btn {
      background: rgba(0, 200, 255, 0.08);
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 4px 10px;
      font-size: 11px;
      letter-spacing: 1px;
      color: var(--text-dim);
      cursor: pointer;
      transition: all 0.2s;
      font-family: 'Rajdhani', sans-serif;
      font-weight: 500;
    }

    .conv-btn:hover {
      border-color: var(--accent);
      color: var(--accent);
    }

    .messages {
      flex: 1;
      overflow-y: auto;
      padding: 16px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .messages::-webkit-scrollbar {
      width: 4px;
    }

    .messages::-webkit-scrollbar-track {
      background: transparent;
    }

    .messages::-webkit-scrollbar-thumb {
      background: rgba(0, 200, 255, 0.2);
      border-radius: 2px;
    }

    .message {
      background: rgba(0, 30, 60, 0.6);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 12px 14px;
      font-size: 14px;
      line-height: 1.5;
      position: relative;
      animation: msgIn 0.3s ease-out forwards;
    }

    @keyframes msgIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .message.user {
      background: rgba(0, 100, 200, 0.15);
      border-color: rgba(0, 150, 255, 0.25);
      margin-left: 20px;
      align-self: flex-end;
      width: 100%;
    }

    .message::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(0, 200, 255, 0.4), transparent);
    }

    .msg-time {
      font-size: 10px;
      color: var(--text-dim);
      margin-top: 6px;
      letter-spacing: 1px;
      font-family: 'Orbitron', sans-serif;
    }

    .msg-sender {
      font-size: 10px;
      color: var(--accent3);
      letter-spacing: 2px;
      margin-bottom: 4px;
      font-family: 'Orbitron', sans-serif;
      font-weight: 600;
    }

    /* Bottom input area */
    .input-area {
      padding: 16px;
      border-top: 1px solid var(--border);
      background: rgba(4, 13, 20, 0.8);
      backdrop-filter: blur(10px);
      position: relative;
      z-index: 10;
      flex-shrink: 0;
    }

    .input-wrapper {
      display: flex;
      align-items: center;
      gap: 10px;
      background: rgba(0, 20, 40, 0.8);
      border: 1px solid rgba(0, 200, 255, 0.25);
      border-radius: 14px;
      padding: 10px 12px;
      transition: border-color 0.3s;
    }

    .input-wrapper:focus-within {
      border-color: rgba(0, 200, 255, 0.6);
      box-shadow: 0 0 20px rgba(0, 200, 255, 0.1);
    }

    .chat-input {
      flex: 1;
      background: transparent;
      border: none;
      outline: none;
      color: var(--text);
      font-family: 'Rajdhani', sans-serif;
      font-size: 15px;
      font-weight: 400;
      letter-spacing: 0.5px;
    }

    .chat-input::placeholder {
      color: var(--text-dim);
    }

    .icon-btn {
      width: 36px;
      height: 36px;
      border: 1px solid var(--border);
      border-radius: 10px;
      background: rgba(0, 200, 255, 0.06);
      color: var(--accent);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.2s;
      flex-shrink: 0;
    }

    .icon-btn:hover {
      border-color: var(--accent);
      background: rgba(0, 200, 255, 0.12);
      box-shadow: var(--glow-sm);
      color: #fff;
    }

    .icon-btn.active {
      border-color: var(--accent3);
      background: rgba(0, 255, 200, 0.1);
      box-shadow: 0 0 12px rgba(0, 255, 200, 0.3);
      color: var(--accent3);
      animation: micPulse 1s ease-in-out infinite;
    }

    @keyframes micPulse {

      0%,
      100% {
        box-shadow: 0 0 12px rgba(0, 255, 200, 0.3);
      }

      50% {
        box-shadow: 0 0 25px rgba(0, 255, 200, 0.6);
      }
    }

    .send-btn {
      width: 36px;
      height: 36px;
      border-radius: 10px;
      background: linear-gradient(135deg, var(--accent2), var(--accent));
      border: none;
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.2s;
      flex-shrink: 0;
      box-shadow: 0 4px 15px rgba(0, 100, 255, 0.4);
    }

    .send-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 6px 20px rgba(0, 150, 255, 0.5);
    }

    /* Bottom toolbar */
    .toolbar {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      padding: 10px 16px 4px;
    }

    .tool-btn {
      width: 44px;
      height: 44px;
      border: 1px solid var(--border);
      border-radius: 12px;
      background: rgba(0, 200, 255, 0.06);
      color: var(--text-dim);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.25s;
      position: relative;
    }

    .tool-btn:hover {
      border-color: var(--accent);
      color: var(--accent);
      background: rgba(0, 200, 255, 0.1);
      box-shadow: var(--glow-sm);
      transform: translateY(-2px);
    }

    /* Particles */
    .particle {
      position: fixed;
      width: 2px;
      height: 2px;
      background: var(--accent);
      border-radius: 50%;
      pointer-events: none;
      animation: particleFloat linear infinite;
      opacity: 0;
    }

    @keyframes particleFloat {
      0% {
        transform: translateY(100vh) translateX(0);
        opacity: 0;
      }

      10% {
        opacity: 0.6;
      }

      90% {
        opacity: 0.2;
      }

      100% {
        transform: translateY(-10vh) translateX(30px);
        opacity: 0;
      }
    }

    /* Corner decorations */
    .corner {
      position: fixed;
      width: 60px;
      height: 60px;
      pointer-events: none;
      z-index: 100;
    }

    .corner-tl {
      top: 60px;
      left: 0;
      border-top: 2px solid rgba(0, 200, 255, 0.3);
      border-left: 2px solid rgba(0, 200, 255, 0.3);
    }

    .corner-tr {
      top: 60px;
      right: 0;
      border-top: 2px solid rgba(0, 200, 255, 0.3);
      border-right: 2px solid rgba(0, 200, 255, 0.3);
    }

    .corner-bl {
      bottom: 0;
      left: 0;
      border-bottom: 2px solid rgba(0, 200, 255, 0.3);
      border-left: 2px solid rgba(0, 200, 255, 0.3);
    }

    .corner-br {
      bottom: 0;
      right: 0;
      border-bottom: 2px solid rgba(0, 200, 255, 0.3);
      border-right: 2px solid rgba(0, 200, 255, 0.3);
    }

    /* Scan line */
    .scanline {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 2px;
      background: linear-gradient(90deg, transparent, rgba(0, 200, 255, 0.4), transparent);
      animation: scan 8s linear infinite;
      pointer-events: none;
      z-index: 1000;
    }

    @keyframes scan {
      from {
        top: 0;
      }

      to {
        top: 100%;
      }
    }
  </style>
</head>

<body>

  <!-- Scanline effect -->
  <div class="scanline"></div>

  <!-- Corner decorations -->
  <div class="corner corner-tl"></div>
  <div class="corner corner-tr"></div>
  <div class="corner corner-bl"></div>
  <div class="corner corner-br"></div>

  <!-- Header -->
  <header>
    <div style="display:flex;align-items:center;gap:16px">
      <div class="logo">M<span>A</span>XUS</div>
      <div class="status-badge">
        <div class="status-dot"></div>
        ONLINE
      </div>
    </div>
    <div class="time-display" id="clock">--:-- --</div>
    <div class="header-right">

    </div>
  </header>

  <!-- Main layout -->
  <div class="main">

    <!-- Left sidebar -->
    <div class="sidebar">

      <!-- System Stats -->

      <!-- Weather -->



    </div>

    <!-- Center -->
    <div class="center">
      <div class="orb-container">
        <div class="ring ring-1"></div>
        <div class="ring ring-2"></div>
        <div class="ring ring-3"></div>
        <div class="ring ring-4"></div>
        <div class="orb-core" id="orb">
          <div class="sound-bars">
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
          </div>
        </div>
      </div>

      <div class="maxus-title">MAXUS</div>
      <div class="listening-badge">
        <div class="listening-dot"></div>
        LISTENING FOR WAKE WORD...
      </div>

      <!-- Center bottom toolbar -->
      <div class="toolbar" style="margin-top:30px">
        <button class="tool-btn" title="YouTube" onclick="openYouTube()">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="red" stroke="none">
            <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
          </svg>
        </button>
        <button class="tool-btn" title="GitHub" onclick="openGitHub()">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" stroke="none">
            <path d="M12 2C6.477 2 2 6.477 2 12c0 4.42 2.865 8.166 6.839 9.489.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.603-3.369-1.34-3.369-1.34-.454-1.156-1.11-1.462-1.11-1.462-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.03-2.682-.103-.253-.447-1.27.098-2.646 0 0 .84-.269 2.75 1.025.8-.223 1.65-.334 2.5-.334.85 0 1.7.111 2.5.334 1.91-1.294 2.75-1.025 2.75-1.025.545 1.376.201 2.393.099 2.646.64.698 1.03 1.591 1.03 2.682 0 3.841-2.337 4.687-4.565 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C19.138 20.161 22 16.418 22 12c0-5.523-4.477-10-10-10z"/>
          </svg>
        </button>
        <button class="tool-btn" title="Google" onclick="openGoogle()">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="none">
            <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/>
            <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/>
            <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/>
            <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/>
          </svg>
        </button>
        <button class="tool-btn" title="LinkedIn" onclick="openLinkedIn()">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" stroke="none">
            <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
          </svg>
        </button>
      </div>
    </div>

    <!-- Right panel - Conversation -->
    <div class="right-panel">
      <div class="conv-header">
        CONVERSATION
        <div class="conv-actions">
          <button class="conv-btn" onclick="clearMessages()">CLEAR</button>
          <button class="conv-btn" onclick="generatePdf()">EXPORT</button>
        </div>
      </div>
      <div class="messages" id="messages">
        <div class="message">
          <div class="msg-sender">MAXUS</div>
          Hello. I am MAXUS, your advanced AI assistant. Systems are online and ready. How can I assist you today?
          <div class="msg-time">2:45 PM</div>
        </div>
      </div>
      <div style="padding:0 16px 8px">
        <div class="input-wrapper">
          <input type="text" class="chat-input" id="chatInput" placeholder="Speak to MAXUS..."
            onkeydown="handleKey(event)">
          <button class="icon-btn" title="Add image" onclick="document.getElementById('imgUpload').click()">
            <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
              <rect x="3" y="3" width="18" height="18" rx="2" />
              <circle cx="8.5" cy="8.5" r="1.5" />
              <path d="M21 15l-5-5L5 21" />
            </svg>
          </button>
          <input type="file" id="imgUpload" accept="image/*" hidden onchange="handleImageUpload(event)">
          <button class="icon-btn" title="Web search" onclick="triggerSearch()">
            <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
              <circle cx="11" cy="11" r="8" />
              <path d="M21 21l-4.35-4.35" />
            </svg>
          </button>
          <button class="icon-btn" id="micBtn" title="Voice input" onclick="toggleMic()">
            <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
              <path d="M12 1a3 3 0 00-3 3v8a3 3 0 006 0V4a3 3 0 00-3-3z" />
              <path d="M19 10v2a7 7 0 01-14 0v-2M12 19v4M8 23h8" />
            </svg>
          </button>
          <button class="send-btn" onclick="sendMessage()">
            <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
              <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" />
            </svg>
          </button>
        </div>
      </div>
    </div>

  </div>
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']]
      }
    };
    </script>
    
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js/styles/github-dark.css">
  <script src="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/lib/common.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  


  <script>

    let jarvisVoice = null;
   // âœ… ADD THIS
    // 1. Create an array of Jarvis-inspired lines
const jarvisLines = [
    " ALL System ready. All parameters nominal . responce delivered.",
    "Good morning, sir. output proccesed.",
    "BOSS i processed the output. Information retrieval in progress.",
    "Analysis complete. The results are in your display panel.",
    
    "All internal systems functioning optimally, input to output loop is fine, waiting for you BOSS.",
    "User authentication successful. Welcome back BOSS , requests delivered waiting for youe responce.",
    "Activating heads-up display sir .",
    "Energy levels at one hundred percent . output processed in you screen.",
    "Protocol initiated. Task execution completed ."
];

// 2. Function to select a random line from the array
function getRandomJarvisLine() {
    // Generate a random index based on the array length
    const randomIndex = Math.floor(Math.random() * jarvisLines.length);
    // Return the element at the random index
    return jarvisLines[randomIndex];
}

    // Clock
    function updateClock() {
      const now = new Date();
      let h = now.getHours();
      const m = String(now.getMinutes()).padStart(2, '0');
      const s = String(now.getSeconds()).padStart(2, '0');
      const ampm = h >= 12 ? 'PM' : 'AM';
      h = h % 12 || 12;
      document.getElementById('clock').textContent = `${h}:${m}:${s} ${ampm}`;
    }
    setInterval(updateClock, 1000);
    updateClock();


    /**
     * Speaks the provided text using a specific male voice if available.
     * @param {string} text The text to be spoken.
     */


// Load voices properly
function loadJarvisVoice() {
    const voices = window.speechSynthesis.getVoices();

    jarvisVoice =
        voices.find(v => v.name.includes("Google UK English Male")) ||
        voices.find(v => v.name.includes("Google US English")) ||
        voices.find(v => v.lang === "en-GB") ||
        voices.find(v => v.lang === "en-US") ||
        voices[0];
}

// Some browsers load voices late
window.speechSynthesis.onvoiceschanged = loadJarvisVoice;

// Call once manually too
loadJarvisVoice();

function speakJarvis(text) {
    if (!text) return;
    let cleanedText = text.replace(/[*#`]/g, '');
    window.speechSynthesis.cancel()
    const utterance = new SpeechSynthesisUtterance(cleanedText);



    if (jarvisVoice) {
        utterance.voice = jarvisVoice;
    }

    utterance.rate = 1.0;   // calm
    utterance.pitch = 0.6; // deeper
    utterance.volume = 1;
    window.speechSynthesis.speak(utterance);

}


    // Mic toggle
// Move these variables outside the function so they persist between calls
let micActive = false;
let recognition = null;
let finalTranscript = ''; // Persist text across sessions

function toggleMic() {
    micActive = !micActive;
    const micBtn = document.getElementById('micBtn');
    const chatInput = document.getElementById('chatInput');
    // const bars = document.querySelectorAll('.bar'); // Optional

    if (micActive) {
        micBtn.classList.add('active');
        // bars.forEach(b => b.style.animationPlayState = 'running');

        if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
            const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
            recognition = new SR();
            
            // --- KEY CHANGES HERE ---
            recognition.continuous = true; // Keep listening even if I pause
            recognition.interimResults = true; // Show text while speaking
            
            recognition.onresult = (e) => {
                let interimTranscript = '';
                for (let i = e.resultIndex; i < e.results.length; ++i) {
                    if (e.results[i].isFinal) {
                        finalTranscript += e.results[i][0].transcript + ' ';
                    } else {
                        interimTranscript += e.results[i][0].transcript;
                    }
                }
                // Update textarea with finalized text + current interim text
                chatInput.value = finalTranscript + interimTranscript;
            };

            recognition.onerror = (e) => {
                console.error(e);
                toggleMic(); // Stop on error
            };
            
            recognition.onend = () => {
                if (micActive) recognition.start(); // Keep restarting if mic is still "on"
            };

            recognition.start();
        } else {
            alert("Web Speech API not supported in this browser.");
            micActive = false;
        }
    } else {
        micBtn.classList.remove('active');
        if (recognition) {
            recognition.stop();
            // Optional: Store the new final value somewhere or just leave it in textarea
            finalTranscript = chatInput.value + ' '; 
            recognition = null;
        }
    }
}



    // Send message
    async function sendMessage() {
      console.log("sendMessage triggered");
      const input = document.getElementById('chatInput');
      const text = input.value.trim();
      if (!text) return;

      addMessage('YOU', text, 'user');
      input.value = '';

      const thinkingDiv = addMessage('MAXUS', 'Processing...');

      let response;

      try {
        response = await fetch('/chat', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ message: text })
        });
      } catch (error) {
        console.error("Fetch error:", error);

        if (thinkingDiv?.isConnected) thinkingDiv.remove();

        // Do NOT show connection message
      }

      if (!response.ok) {
        if (thinkingDiv?.isConnected) thinkingDiv.remove();
        addMessage('MAXUS', 'Server error occurred.');
        return;
      }

      const data = await response.json();

      if (thinkingDiv?.isConnected) thinkingDiv.remove();

      addMessage('MAXUS', data.reply);
      const selectedResponse = getRandomJarvisLine();
      speakJarvis(data.reply);
    }

    function handleKey(e) {
      if (e.key === 'Enter') sendMessage();
    }

    function addMessage(sender, text, type = '') {
      const msgs = document.getElementById('messages');
      const div = document.createElement('div');
      div.className = 'message' + (type === 'user' ? ' user' : '');
      const now = new Date();
      let h = now.getHours() % 12 || 12;
      const m = String(now.getMinutes()).padStart(2, '0');
      const ampm = now.getHours() >= 12 ? 'PM' : 'AM';

      const renderedMarkdown = marked.parse(text);

      div.innerHTML = `
      <div class="msg-sender">${sender}</div>
      <div class="msg-content">${renderedMarkdown}</div>
      <div class="msg-time">${h}:${m} ${ampm}</div>
    `;


      msgs.appendChild(div);
      msgs.scrollTop = msgs.scrollHeight;
      
      if (window.MathJax) {
        MathJax.typesetPromise([div]);
      }

      return div; // ðŸ”¥ THIS IS IMPORTANT
    }

    function clearMessages() {
      const msgs = document.getElementById('messages');
      msgs.innerHTML = '';
      addMessage('MAXUS', 'Conversation cleared. Ready for new session.');
    }

    async function triggerSearch() {
  const input = document.getElementById('chatInput');
  const q = input.value.trim();

  if (!q) {
    addMessage('MAXUS', 'Web search mode activated. Enter your query.');
    return;
  }

  addMessage('MAXUS', `Initiating web search for: "${q}"...`);

  const response = await fetch('/search', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({ message: q })
  });

  const data = await response.json();
  addMessage('MAXUS', data.reply);
  speakJarvis(data.reply)
}

 async function handleImageUpload(e) {
  const file = e.target.files[0];
  if (!file) return;

  const input = document.getElementById('chatInput');
  let question = input.value.trim();

  if (!question) {
    question = "Describe this image.";
  }

  addMessage('YOU', `[Image uploaded: ${file.name}]`, 'user');
  addMessage('YOU', question, 'user');

  input.value = '';

  const thinkingDiv = addMessage('MAXUS', 'Analyzing image...');

  const formData = new FormData();
  formData.append("image", file);
  formData.append("prompt", question);

  try {
    const response = await fetch("/vision", {
      method: "POST",
      body: formData
    });

    const data = await response.json();

    if (thinkingDiv?.isConnected) thinkingDiv.remove();

    addMessage('MAXUS', data.reply);
    speakJarvis(getRandomJarvisLine());

  } catch (error) {
    if (thinkingDiv?.isConnected) thinkingDiv.remove();
    addMessage('MAXUS', "Image processing failed.");
  }
}

    // Floating particles
    function createParticle() {
      const p = document.createElement('div');
      p.className = 'particle';
      p.style.left = Math.random() * 100 + 'vw';
      p.style.animationDuration = (8 + Math.random() * 12) + 's';
      p.style.animationDelay = Math.random() * 5 + 's';
      p.style.opacity = Math.random() * 0.5;
      document.body.appendChild(p);
      setTimeout(() => p.remove(), 20000);
    }

    setInterval(createParticle, 800);
    
    document.addEventListener("click", function initVoice() {
    const greeting = "Welcome sir. All systems activated. Waiting for your move.";

    speakJarvis(greeting);

    document.removeEventListener("click", initVoice);
});
function openYouTube() {
  // Opens a new blank window (default behavior)
  window.open('https://www.youtube.com/', '_blank');
}
function openGitHub(){
  window.open('https://github.com/', '_blank')
}
function openGoogle() {
  window.open("https://www.google.com", "_blank");
}
function openLinkedIn() {
  window.open("https://www.linkedin.com", "_blank");
  
  // Or open your profile
  // window.open("https://www.linkedin.com/in/your-profile", "_blank");
}

async function generatePdf() {
    const { jsPDF } = window.jspdf;

    const doc = new jsPDF({
        orientation: 'p',
        unit: 'pt',
        format: 'a4'
    });

    const pageWidth = doc.internal.pageSize.getWidth();
    const pageHeight = doc.internal.pageSize.getHeight();

    const margin = 50;
    const maxWidth = pageWidth - margin * 2;
    let y = margin;

    doc.setFont("helvetica", "normal");
    doc.setFontSize(12);

    const messages = document.querySelectorAll(".message");

    for (let message of messages) {

        // Extract text content cleanly
        const text = message.innerText;

        // Wrap text to fit page width
        const splitText = doc.splitTextToSize(text, maxWidth);

        // If text exceeds page, add new page
        if (y + splitText.length * 14 > pageHeight - margin) {
            doc.addPage();
            y = margin;
        }

        doc.text(splitText, margin, y);
        y += splitText.length * 14 + 10;

        // Handle links inside message
        const links = message.querySelectorAll("a");
        for (let link of links) {
            const url = link.href;
            const linkText = link.innerText;

            if (y + 14 > pageHeight - margin) {
                doc.addPage();
                y = margin;
            }

            doc.setTextColor(0, 0, 255);
            doc.textWithLink(linkText, margin, y, { url });
            doc.setTextColor(0, 0, 0);

            y += 20;
        }

        y += 10; // spacing between messages
    }

    doc.save("chat-export.pdf");
}





// Example usage:
// openChrome(); 

  </script>

</body>

</html>